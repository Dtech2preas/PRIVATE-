<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>DTech — Private Dashboard (Responsive)</title>
  <style>
    :root{
      --bg:#05060a;
      --panel:rgba(20,20,20,0.7);
      --muted:#bfc9cc;
      --text:#e6f6f7;
      --accent:#00f3ff;
      --accent-strong:rgba(0,243,255,0.15);
      --danger:#ff5353;
      --success:#26d07b;
      --glass:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      --radius:12px;
      --gap:12px;
    }*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background: radial-gradient(1200px 600px at 10% 10%, rgba(0,20,30,0.6), transparent), var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.4;
  padding-bottom:84px; /* space for bottom nav on mobile */
}

/* Top header (compact) */
header.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--gap);
  padding:14px 16px;
  position:sticky;
  top:0;
  z-index:60;
  backdrop-filter: blur(8px);
  background: linear-gradient(180deg, rgba(10,12,15,0.6), rgba(10,12,15,0.35));
  border-bottom:1px solid rgba(255,255,255,0.03);
}

.brand{
  display:flex;align-items:center;gap:10px
}
.logo{
  width:42px;height:42px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#006c7a);display:grid;place-items:center;font-weight:700;color:#012;box-shadow:0 6px 30px rgba(0,243,255,0.06);
}
.brand h1{font-size:1.05rem;margin:0}
.brand p{margin:0;font-size:0.78rem;color:var(--muted)}

/* container */
.wrap{max-width:1100px;margin:18px auto;padding:0 16px}

/* Cards grid */
.card-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.card{background:var(--panel);border-radius:var(--radius);padding:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 20px rgba(0,0,0,0.6);}

.section-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.section-head h2{margin:0;font-size:1rem}
.action-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;color:var(--text);font-weight:600}
.action-btn.primary{background:linear-gradient(90deg,var(--accent),#00c1ff);color:#012;border:none;box-shadow:0 6px 18px rgba(0,243,255,0.06)}

/* website list */
.website-card .row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.website-card a{color:var(--accent);font-weight:600;text-decoration:none}
.status{padding:6px 8px;border-radius:999px;font-weight:700;font-size:0.8rem}
.up{background:rgba(38,208,123,0.12);color:var(--success)}
.down{background:rgba(255,83,83,0.08);color:var(--danger)}
.maint{background:rgba(255,196,0,0.08);color:#ffc700}

/* cloudflare list */
.cf-list{display:flex;flex-direction:column;gap:8px}
.cf-item{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:10px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02)}
.cf-item .meta{font-size:0.9rem;color:var(--muted)}

/* facts / ideas */
.facts-list{display:flex;flex-direction:column;gap:10px;padding:0;margin:0;list-style:none}

/* modal / bottomsheet */
.modal-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:90;padding:20px}
.modal{width:100%;max-width:720px;border-radius:12px;padding:16px;background:var(--panel);border:1px solid rgba(255,255,255,0.03)}
.modal .inputs{display:grid;gap:10px}
.input,textarea,select{width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)}
textarea{min-height:96px}

/* login overlay */
#login-screen{position:fixed;inset:0;display:grid;place-items:center;background:linear-gradient(180deg,rgba(0,0,0,0.6),rgba(0,0,0,0.8));z-index:120}
.login-panel{width:92%;max-width:420px;background:var(--panel);padding:18px;border-radius:14px;border:1px solid rgba(255,255,255,0.03);}
.login-panel h2{margin:0 0 6px 0}
.login-row{display:flex;gap:8px}
.login-row input{flex:1}
.big-btn{display:inline-block;padding:12px 16px;border-radius:10px;background:linear-gradient(90deg,var(--accent),#00c1ff);color:#012;border:none;font-weight:700}

/* toast */
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:88px;background:rgba(0,0,0,0.75);color:var(--text);padding:10px 14px;border-radius:10px;z-index:200;display:none}
.toast.show{display:block}

/* bottom nav */
.bottom-nav{position:fixed;left:0;right:0;bottom:0;height:70px;background:linear-gradient(180deg,rgba(10,12,15,0.95),rgba(10,12,15,0.98));display:flex;gap:6px;align-items:center;justify-content:space-around;padding:8px;border-top:1px solid rgba(255,255,255,0.03);z-index:70}
.nav-btn{flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;padding:8px 6px;border-radius:12px;color:var(--muted);font-size:0.75rem}
.nav-btn.active{background:var(--accent-strong);color:var(--text);box-shadow:0 6px 20px rgba(0,243,255,0.06)}

/* responsive adjustments */
@media (max-width:900px){
  .card-grid{grid-template-columns:1fr}
  .brand h1{font-size:1rem}
}

@media (max-width:420px){
  header.topbar{padding:12px}
  .logo{width:40px;height:40px}
  .card{padding:10px}
  .modal{padding:12px}
  .bottom-nav{height:76px}
}

/* subtle animations */
.fadeIn{animation:fadeIn .22s ease both}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

  </style>
</head>
<body>  <!-- Login (keeps same JS auth flow) -->  <div id="login-screen">
    <div class="login-panel fadeIn">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div>
          <h2 style="color:var(--accent);margin:0">DTech Secure</h2>
          <div style="font-size:0.88rem;color:var(--muted)">Private Dashboard — enter password</div>
        </div>
        <div style="text-align:right;color:var(--muted);font-size:0.82rem">v1.2</div>
      </div><div style="margin-top:12px" class="login-row">
    <input id="password-input" type="password" placeholder="Password" class="input" />
    <button id="access-btn" class="big-btn">ACCESS</button>
  </div>
  <p id="login-error" style="color:var(--danger);display:none;margin-top:8px">Invalid password</p>
</div>

  </div>  <header class="topbar">
    <div class="brand">
      <div class="logo">D</div>
      <div>
        <h1>DTech <span style="color:var(--accent)">Private</span></h1>
        <p>Private dashboard — synced with Cloudflare KV</p>
      </div>
    </div>
    <div style="display:flex;align-items:center;gap:10px">
      <button id="save-btn" class="action-btn">Save</button>
      <button id="logout-btn" class="action-btn" style="border-color:rgba(255,255,255,0.06)">Logout</button>
    </div>
  </header>  <main class="wrap"><section class="card fadeIn">
  <div class="section-head">
    <h2>Websites</h2>
    <div style="display:flex;gap:8px">
      <button class="action-btn" id="add-website">+ Add</button>
      <button class="action-btn" id="refresh">Refresh</button>
    </div>
  </div>
  <div id="websites-grid" class="card-grid"></div>
</section>

<section class="card fadeIn" style="margin-top:12px">
  <div class="section-head">
    <h2>Cloudflare Accounts</h2>
    <div style="display:flex;gap:8px">
      <button class="action-btn" id="add-cf">+ Account</button>
    </div>
  </div>
  <div id="cloudflare-accounts-list" class="cf-list"></div>
</section>

<section class="card fadeIn" style="margin-top:12px">
  <div class="section-head">
    <h2>Ideas & Facts</h2>
    <div style="display:flex;gap:8px">
      <button class="action-btn" id="add-idea">+ Idea</button>
      <button class="action-btn" id="add-fact">+ Fact</button>
    </div>
  </div>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
    <div>
      <h3 style="margin:0 0 8px 0">Ideas</h3>
      <div id="ideas-grid" style="display:flex;flex-direction:column;gap:8px"></div>
    </div>
    <div>
      <h3 style="margin:0 0 8px 0">Facts</h3>
      <ul id="facts-list" class="facts-list"></ul>
    </div>
  </div>
</section>

  </main>  <!-- Modal (re-usable) -->  <div id="add-modal" class="modal-overlay">
    <div class="modal">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <strong id="modal-title">Add Item</strong>
        <button id="close-modal" class="action-btn">Close</button>
      </div>
      <div id="modal-form-container" class="inputs"></div>
      <div style="display:flex;justify-content:flex-end;margin-top:12px;gap:8px">
        <button id="cancel-modal" class="action-btn">Cancel</button>
        <button id="confirm-add" class="action-btn primary">Add</button>
      </div>
    </div>
  </div>  <!-- Toast -->  <div id="toast" class="toast"></div>  <!-- Bottom nav (mobile friendly) -->  <nav class="bottom-nav">
    <button class="nav-btn active" data-tab="websites"> 
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden>
        <path d="M12 2C6.48 2 2 6.48 2 12h20C22 6.48 17.52 2 12 2z" fill="currentColor" opacity="0.9"/>
      </svg>
      Websites
    </button>
    <button class="nav-btn" data-tab="cloudflare">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" fill="currentColor" opacity="0.85"/></svg>
      Cloudflare
    </button>
    <button class="nav-btn" data-tab="ideas">
      <svg width="20" height="20" viewBox="0 0 24 24"><path d="M9 21h6v-2H9v2zM12 2C8.13 2 5 5.13 5 9c0 2 .8 3.83 2.1 5.2L9 15v1h6v-1l1.9-0.8C18.2 12.83 19 11 19 9c0-3.87-3.13-7-7-7z" fill="currentColor"/></svg>
      Ideas
    </button>
    <button class="nav-btn" data-tab="facts">
      <svg width="20" height="20" viewBox="0 0 24 24"><path d="M18 2H6v20h12V2zM8 4h8v8l-4-2.5L8 12V4z" fill="currentColor"/></svg>
      Facts
    </button>
  </nav>  <script>
    /* Config */
    const WORKER_URL = "https://tight-sunset-d25e.dtech2j.workers.dev/";
    const PASSWORD_KEY = "dtech_auth_token";

    let appData = {websites:[],cloudflare:[],ideas:[],facts:[]};
    let currentModalType=''; let currentCFIndex=-1;

    // DOM refs
    const loginScreen = document.getElementById('login-screen');
    const accessBtn = document.getElementById('access-btn');
    const saveBtn = document.getElementById('save-btn');
    const logoutBtn = document.getElementById('logout-btn');
    const toastEl = document.getElementById('toast');

    const addModal = document.getElementById('add-modal');
    const modalForm = document.getElementById('modal-form-container');
    const modalTitle = document.getElementById('modal-title');

    // Helpers
    function showToast(msg, time=2200){
      toastEl.innerText = msg; toastEl.classList.add('show');
      setTimeout(()=>toastEl.classList.remove('show'), time);
    }

    function escapeHtml(text){if(!text) return ''; return String(text).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;');}

    // render functions
    function renderAll(){ renderWebsites(); renderCloudflare(); renderIdeas(); renderFacts(); }

    function renderWebsites(){
      const grid = document.getElementById('websites-grid'); grid.innerHTML='';
      (appData.websites||[]).forEach((site,i)=>{
        const el = document.createElement('div'); el.className='card website-card';
        const statusClass = site.status==='Down' ? 'down' : (site.status==='Maintenance' ? 'maint' : 'up');
        el.innerHTML = `
          <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:8px">
            <div>
              <a target="_blank" rel="noreferrer" href="https://${escapeHtml(site.domain)}">${escapeHtml(site.domain)}</a>
              <div style="color:var(--muted);font-size:0.9rem;margin-top:6px">${escapeHtml(site.description||'No description')}</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end">
              <div class="status ${statusClass}">${site.status||'Up'}</div>
              <div style="display:flex;gap:6px">
                <button class="action-btn" onclick="confirmDelete('websites',${i})">Delete</button>
              </div>
            </div>
          </div>
        `;
        grid.appendChild(el);
      });
      if((appData.websites||[]).length===0){ grid.innerHTML = '<div style="color:var(--muted);padding:12px">No websites yet — add one.</div>' }
    }

    function renderCloudflare(){
      const list = document.getElementById('cloudflare-accounts-list'); list.innerHTML='';
      (appData.cloudflare||[]).forEach((acc,ai)=>{
        const wrap = document.createElement('div'); wrap.className='cf-item';
        const domainsCount = (acc.domains||[]).length; const workersCount=(acc.workers||[]).length;
        wrap.innerHTML = `
          <div>
            <div style="font-weight:700">${escapeHtml(acc.name||acc.account||'Unnamed')}</div>
            <div class="meta">${domainsCount} domains • ${workersCount} workers</div>
          </div>
          <div style="display:flex;gap:8px;align-items:center">
            <button class="action-btn" onclick="showAddModal('cf-domain',${ai})">+ Domain</button>
            <button class="action-btn" onclick="showAddModal('cf-worker',${ai})">+ Worker</button>
            <button class="action-btn" onclick="confirmDelete('cloudflare',${ai})">Delete</button>
          </div>
        `;
        list.appendChild(wrap);
      });
      if((appData.cloudflare||[]).length===0) list.innerHTML = '<div style="color:var(--muted);padding:12px">No Cloudflare accounts yet</div>';
    }

    function renderIdeas(){ const grid = document.getElementById('ideas-grid'); grid.innerHTML=''; (appData.ideas||[]).forEach((idea,i)=>{ const item=document.createElement('div'); item.className='card'; item.style.padding='10px'; item.innerHTML=`<div style="font-weight:700;color:var(--accent)">${escapeHtml(idea.title)}</div><div style="color:var(--muted);margin-top:6px">${escapeHtml(idea.description||'')}</div><div style="text-align:right;margin-top:8px"><button class="action-btn" onclick="confirmDelete('ideas',${i})">Delete</button></div>`; grid.appendChild(item); }); if((appData.ideas||[]).length===0) grid.innerHTML='<div style="color:var(--muted);padding:12px">No ideas yet</div>'; }

    function renderFacts(){ const list=document.getElementById('facts-list'); list.innerHTML=''; (appData.facts||[]).forEach((f,i)=>{ const li=document.createElement('li'); li.className='card'; li.style.padding='10px'; li.innerHTML=`<div style="font-weight:700;color:var(--accent)">${escapeHtml(f.header)}</div><div style="color:var(--muted);margin-top:6px">${escapeHtml(f.description||'')}</div><div style="text-align:right;margin-top:8px"><button class="action-btn" onclick="confirmDelete('facts',${i})">Delete</button></div>`; list.appendChild(li); }); if((appData.facts||[]).length===0) list.innerHTML='<div style="color:var(--muted);padding:12px">No facts yet</div>'; }

    function confirmDelete(cat,index){ if(confirm('Delete item?')){ appData[cat].splice(index,1); renderAll(); saveData(); showToast('Deleted'); }}

    // modal helpers
    function showAddModal(type,index=-1){ currentModalType=type; currentCFIndex=index; modalForm.innerHTML=''; addModal.style.display='flex';
      modalTitle.innerText = (type==='website'?'Add Website': type==='cloudflare'?'Add Cloudflare Account': type==='cf-domain'?'Add Domain': type==='cf-worker'?'Add Worker': type==='idea'?'New Idea': type==='fact'?'New Fact':'Add Item');

      if(type==='website'){
        modalForm.innerHTML = `<input id="m-domain" class="input" placeholder="domain (example.com)"/><input id="m-desc" class="input" placeholder="short description"/><select id="m-status" class="input"><option>Up</option><option>Down</option><option>Maintenance</option></select><textarea id="m-notes" class="input" placeholder="notes (optional)"></textarea>`} else if(type==='cloudflare'){
    modalForm.innerHTML = `<input id="m-name" class="input" placeholder="Account name or email"/>`;
  } else if(type==='cf-domain'){
    modalForm.innerHTML = `<input id="m-url" class="input" placeholder="Domain url (example.com)"/><input id="m-desc" class="input" placeholder="Description (optional)"/>`;
  } else if(type==='cf-worker'){
    modalForm.innerHTML = `<input id="m-url" class="input" placeholder="Worker URL"/><input id="m-desc" class="input" placeholder="Description (optional)"/>`;
  } else if(type==='idea'){
    modalForm.innerHTML = `<input id="m-idea-title" class="input" placeholder="Idea title"/><textarea id="m-idea-desc" class="input" placeholder="Description"></textarea>`
  } else if(type==='fact'){
    modalForm.innerHTML = `<input id="m-fact-header" class="input" placeholder="Header"/><textarea id="m-fact-desc" class="input" placeholder="Description"></textarea>`
  }
}

function closeModal(){ addModal.style.display='none'; }

document.getElementById('close-modal').addEventListener('click', closeModal);
document.getElementById('cancel-modal').addEventListener('click', closeModal);

document.getElementById('confirm-add').addEventListener('click', ()=>{
  if(currentModalType==='website'){ const domain=document.getElementById('m-domain').value.trim(); if(!domain) return showToast('Domain required'); const description=document.getElementById('m-desc').value; const status=document.getElementById('m-status').value; const notes=document.getElementById('m-notes').value; appData.websites.push({domain,description,status,notes}); }
  else if(currentModalType==='cloudflare'){ const name=document.getElementById('m-name').value.trim(); if(!name) return showToast('Name required'); appData.cloudflare.push({name,domains:[],workers:[]}); }
  else if(currentModalType==='cf-domain'){ const url=document.getElementById('m-url').value.trim(); const desc=document.getElementById('m-desc').value; if(!url) return showToast('URL required'); if(!appData.cloudflare[currentCFIndex].domains) appData.cloudflare[currentCFIndex].domains=[]; appData.cloudflare[currentCFIndex].domains.push({url,description:desc}); }
  else if(currentModalType==='cf-worker'){ const url=document.getElementById('m-url').value.trim(); const desc=document.getElementById('m-desc').value; if(!url) return showToast('URL required'); if(!appData.cloudflare[currentCFIndex].workers) appData.cloudflare[currentCFIndex].workers=[]; appData.cloudflare[currentCFIndex].workers.push({url,description:desc}); }
  else if(currentModalType==='idea'){ const title=document.getElementById('m-idea-title').value.trim(); const desc=document.getElementById('m-idea-desc').value; if(!title) return showToast('Title required'); appData.ideas.push({title,description:desc}); }
  else if(currentModalType==='fact'){ const header=document.getElementById('m-fact-header').value.trim(); const desc=document.getElementById('m-fact-desc').value; if(!header) return showToast('Header required'); appData.facts.push({header,description:desc}); }
  renderAll(); closeModal(); saveData(); showToast('Added');
});

// nav switching
document.querySelectorAll('.nav-btn').forEach(b=>b.addEventListener('click',(e)=>{
  document.querySelectorAll('.nav-btn').forEach(x=>x.classList.remove('active'));
  e.currentTarget.classList.add('active');
  const tab = e.currentTarget.dataset.tab;
  // scroll to section
  if(tab==='websites') document.querySelector('section.card').scrollIntoView({behavior:'smooth',block:'start'});
  if(tab==='cloudflare') document.querySelectorAll('section.card')[1].scrollIntoView({behavior:'smooth',block:'start'});
  if(tab==='ideas' || tab==='facts') document.querySelectorAll('section.card')[2].scrollIntoView({behavior:'smooth',block:'start'});
}));

// wire buttons
document.getElementById('add-website').addEventListener('click',()=>showAddModal('website'));
document.getElementById('add-cf').addEventListener('click',()=>showAddModal('cloudflare'));
document.getElementById('add-idea').addEventListener('click',()=>showAddModal('idea'));
document.getElementById('add-fact').addEventListener('click',()=>showAddModal('fact'));
document.getElementById('refresh').addEventListener('click',()=>{ const p=localStorage.getItem(PASSWORD_KEY); if(p) fetchData(p); });

// auth flow
accessBtn.addEventListener('click', attemptLogin);
document.getElementById('password-input').addEventListener('keydown', (e)=>{ if(e.key==='Enter') attemptLogin(); });
logoutBtn.addEventListener('click', ()=>{ localStorage.removeItem(PASSWORD_KEY); location.reload(); });
saveBtn.addEventListener('click', saveData);

// fetch/save
async function fetchData(password){
  showToast('Syncing...');
  try{
    const res = await fetch(WORKER_URL, {headers:{'Authorization':`Bearer ${password}`}});
    if(res.status===401){ document.getElementById('login-error').style.display='block'; return false; }
    if(!res.ok) throw new Error('Failed');
    const data = await res.json(); appData = {...appData,...data}; renderAll(); loginScreen.style.display='none'; return true;
  }catch(err){ console.error(err); showToast('Unable to sync'); return false; }
}

async function saveData(){
  const password = localStorage.getItem(PASSWORD_KEY);
  showToast('Saving...');
  try{
    const res = await fetch(WORKER_URL, {method:'POST',headers:{'Authorization':`Bearer ${password}`,'Content-Type':'application/json'},body:JSON.stringify(appData)});
    if(!res.ok) throw new Error('Save failed');
    const result = await res.json(); showToast('Saved');
  }catch(err){ console.error(err); showToast('Save failed'); }
}

async function attemptLogin(){
  const password = document.getElementById('password-input').value.trim();
  if(!password){ document.getElementById('login-error').innerText='Please enter password'; document.getElementById('login-error').style.display='block'; return; }
  localStorage.setItem(PASSWORD_KEY,password);
  accessBtn.disabled=true; accessBtn.innerText='ACCESSING...';
  const ok = await fetchData(password);
  accessBtn.disabled=false; accessBtn.innerText='ACCESS';
  if(ok){ document.getElementById('login-error').style.display='none'; showToast('Welcome'); }
  else localStorage.removeItem(PASSWORD_KEY);
}

// on load: try auto-login
document.addEventListener('DOMContentLoaded', ()=>{
  const p = localStorage.getItem(PASSWORD_KEY); if(p){ document.getElementById('password-input').value=p; attemptLogin(); }
});

  </script>
</body>
</html>